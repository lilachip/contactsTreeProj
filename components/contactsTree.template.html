<script type="text/ng-template" id="contactsTree">
    <div>
        <span ng-class="$ctrl.expandable(contact) ? 'expandable' : ''" ng-click="$ctrl.toggleExpansion(contact)">{{contact.name}}</span>
        <ul ng-if="contact.expanded">
            <li ng-repeat="contact in contact.contacts" ng-include="'contactsTree'">
            </li>
        </ul>
    </div>
</script>

<h1>Contact Tree</h1>
<ul>
    <li ng-repeat="contact in $ctrl.contactList" ng-include="'contactsTree'"></li>
</ul>